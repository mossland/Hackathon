pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,s;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,s))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(i,e,s,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(i,e,s)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=0===this.duration?1:this.time/this.duration,r=this.easing(n);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e},pc.Entity.prototype.localMoveTo=function(t,i,e=pc.QuadraticOut){return this.tween(this.getLocalPosition()).to(t,i,e).start()},pc.Entity.prototype.localMoveBy=function(t,i,e=pc.SineOut){return this.tween(this.getLocalPosition()).by(t,i,e).start()},pc.Entity.prototype.moveTo=function(t,i){return this.tween(this.getPosition()).to(t,i,pc.SineOut).start()},pc.Entity.prototype.moveBy=function(t,i){return this.tween(this.getPosition()).by(t,i,pc.SineOut).start()},pc.Entity.prototype.rotateTo=function(t,i,e=pc.CircularOut){return this.tween(this.getLocalEulerAngles()).rotate(t,i,e).start()},pc.Entity.prototype.setOpacity=function(t){this.element&&(this.element.material,this.element.opacity=t)},pc.Entity.prototype.setOpacityCascade=function(t){this.setOpacity(t);for(let i=0;i<this.children.length;i++)this.children[i].setOpacityCascade&&this.children[i].setOpacityCascade(t)},pc.Entity.prototype.opacityToCascade=function(t,i,e){let s={v:t};return this.setOpacityCascade(t),this.tween(s).to({v:i},e,pc.SineOut).on("update",(()=>{this.setOpacityCascade(s.v)})).start()},pc.Entity.prototype.opacityTo=function(t,i,e){if(!this.element.material)return;let s={v:t};return this.setOpacity(t),this.tween(s).to({v:i},e,pc.SineOut).on("update",(()=>{this.setOpacity(s.v)})).start()},pc.Entity.prototype.setTextureFromURL=function(t){pc.app.loader.getHandler("texture").crossOrigin="anonymous";var i=new pc.Asset("t"+Math.random(),"texture",{url:t});pc.app.assets.add(i),i.on("load",(t=>{this.element.texture=t.resource})),pc.app.assets.load(i)},pc.Entity.prototype.blink=function(t,i,e,s){for(let n=0;n<s;n++)setTimeout((()=>{this.setOpacity(t)}),e*n*2),setTimeout((()=>{this.setOpacity(i)}),e*(2*n+1))};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var Background=pc.createScript("background");Background.attributes.add("startPosX",{type:"number",default:1}),Background.attributes.add("endPosX",{type:"number",default:1}),Background.attributes.add("durationTime",{type:"number",default:1}),Background.prototype.initialize=function(){this.entity.setLocalPosition(this.startPosX,0,0),this.tween=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(this.endPosX,0,0),this.durationTime,pc.Linear).loop(!0).yoyo(!0),this.tween.start()},Background.prototype.update=function(t){};var Prefab=pc.createScript("prefab");function safeDestroy(e){void 0===e.prefabName?e.destroy():Prefab.return(e)}Prefab.PoolMaxSizePerItem=30,Prefab.attributes.add("card",{type:"entity"}),Prefab.attributes.add("winEffectProfile",{type:"entity"}),Prefab.prototype.initialize=function(){Prefab.instance=this,Prefab.cache={},Prefab.preload()},Prefab.preload=function(){},Prefab.create=function(e){if(prefab=Prefab.instance[e],void 0===Prefab.cache[e]||0===Prefab.cache[e].length){let a=prefab.clone();return a.enabled=!0,prefab.parent.addChild(a),Prefab.recycle(a),a.prefabName=e,a}{let a=Prefab.cache[e][0];return Prefab.cache[e].splice(0,1),a.prefabName=e,a.enabled=!0,Prefab.recycle(a),a}},Prefab.return=function(e){let a=e.prefabName;e.enabled=!1,void 0===Prefab.cache[a]?Prefab.cache[a]=[e]:Prefab.cache[a].length>=Prefab.PoolMaxSizePerItem?e.destroy():Prefab.cache[a].push(e)},Prefab.recycle=function(e){setTimeout((()=>{Prefab.recycleParticle(e)}),1)},Prefab.recycleParticle=function(e){void 0!==e.particlesystem&&(e.particlesystem.reset(),e.particlesystem.play());for(let a=0;a<e.children.length;a++)Prefab.recycleParticle(e.children[a])};var UserBalance=pc.createScript("userBalance");UserBalance.attributes.add("userBalanceText",{type:"entity"}),UserBalance.prototype.initialize=function(){UserBalance.instance=this},UserBalance.prototype.setBalance=function(e){let t={value:Number(this.userBalanceText.element.text)},a=this.userBalanceText.element,n=this.entity.tween(t).to({value:e},.3,pc.Linear);n.on("update",(function(e){let n=t.value.toFixed(0);a.text=`${n}`})),n.start()},UserBalance.prototype.update=function(e){};var ThugItem=pc.createScript("thugItem");ThugItem.attributes.add("thugImage",{type:"entity"}),ThugItem.attributes.add("thugId",{type:"entity"}),ThugItem.prototype.initialize=function(){this.thugInfo=null},ThugItem.prototype.setThug=function(t){null!=this.thugInfo&&this.thugInfo.id===t.id||(this.thugInfo=t,console.log(t),this.thugImage.setTextureFromURL(t.url),this.thugId.element.text=`# ${t.id}`)},ThugItem.prototype.getImageResource=function(){return this.thugImage.element.texture},ThugItem.prototype.update=function(t){};var GameController=pc.createScript("gameController");GameController.prototype.initialize=function(){GameController.instance=this},GameController.prototype.test=async function(){let t=[],e=await DummyServer.instance.getThugInfo();for(let o=0;o<10;++o){let n=e[o],r={url:`https://asset.thecyberthug.com/cyberthug-genesis-club/tokens/${n}/asset/asset.png`,number:o,id:n};t.push(r)}ThugList.instance.setThug(t)},GameController.prototype.genThugInfo=function(){},GameController.prototype.update=function(t){};var ThugList=pc.createScript("thugList");ThugList.prototype.initialize=function(){ThugList.instance=this,this.thugInfo=[]},ThugList.prototype.setThug=function(t){this.thugInfo=[];for(let i=0;i<t.length;++i){let u={url:t[i].url,number:t[i].number,id:t[i].id,imgAsset:null,isLoaded:!1};this.loadImage(u),this.thugInfo.push(u)}Top.instance.setThug(this.thugInfo)},ThugList.prototype.isLoadedImage=function(){for(let t=0;t<this.thugInfo.length;++t)if(!1===this.thugInfo[t].isLoaded)return!1;return!0},ThugList.prototype.loadImage=function(t){},ThugList.prototype.update=function(t){};var Top=pc.createScript("top");Top.attributes.add("thugList",{type:"entity",array:!0}),Top.prototype.initialize=function(){Top.instance=this},Top.prototype.setThug=function(t){for(let e=0;e<10;++e)this.thugList[e].script.thugItem.setThug(t[e])},Top.prototype.getImage=function(t){return this.thugList[t].script.thugItem.getImageResource()},Top.prototype.update=function(t){};var Center=pc.createScript("center");Center.attributes.add("thugImage1",{type:"entity"}),Center.attributes.add("thugImage2",{type:"entity"}),Center.prototype.initialize=function(){Center.instance=this},Center.prototype.setImage=function(t,e){let n=null;n=0===t?this.thugImage1:this.thugImage2,n.element.texture=Top.instance.getImage(e)},Center.prototype.update=function(t){};var Bottom=pc.createScript("bottom");Bottom.prototype.initialize=function(){Bottom.instance=this},Bottom.prototype.update=function(t){},Bottom.prototype.setHiLo=function(t){let o="",e="",i=0,r=0,m=0;0===t?(o="Higher",e="Same",i=.9,r=.1):9===t?(o="Same",e="Higher",i=.1,r=.9):(o="Higher or Same",e="Lower or Same",i=(10-t)/10,r=t+1),m=(1/i).toFixed(2),r=(1/r).toFixed(2)};var DummyServer=pc.createScript("dummyServer");DummyServer.prototype.initialize=function(){DummyServer.instance=this,this.prevStartNum=-1,this.betAmount=-1},DummyServer.prototype.bet=function(t){return[]},DummyServer.prototype.getRandomInt=function(t,r){return t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t))+t},DummyServer.prototype.getThugInfo=async function(t){console.log("ayncCall call");let r=[];for(;10!==r.length;){let t=this.getRandomInt(1,10001);console.log(t),!0===await loadJson(t)&&r.push(t)}r.sort(((t,r)=>t-r)),console.log(r);let e=this.getRandomInt(0,11),o={thugId:r,startNum:e};return this.prevStartNum=e,this.betAmount=t,o},DummyServer.prototype.betHiLo=function(t){let r=this.getRandomInt(0,11),e=!1,o=!1,i=this.prevStartNum-r;i<0?o=!0:i>0?e=!0:0===i&&(e=!0,o=!0,0===this.prevStartNum&&(e=!1),10===this.prevStartNum&&(o=!1)),0===this.prevStartNum?(hiProbability=.9,loProbability=.1):9===this.prevStartNum?(hiProbability=.1,loProbability=.9):(hiProbability=(10-this.prevStartNum)/10,loProbability=this.prevStartNum+1),hiMultiplier=(1/hiProbability).toFixed(2),loProbability=(1/loProbability).toFixed(2)},DummyServer.prototype.update=function(t){};function resolveAfter2Seconds(){return new Promise((e=>{setTimeout((()=>{e("resolved")}),2e3)}))}async function ayncCall(){return await resolveAfter2Seconds()}async function loadJson(e){let o=`https://asset.thecyberthug.com/cyberthug-genesis-club/tokens/${e}/asset/meta.json`;return new Promise((e=>{this.loadJsonFromRemote(o,(function(o){let n=JSON.stringify(o);"CyberTHUG Genesis Club"==JSON.parse(n).description?e(!0):e(!1)}))}))}async function loadJsonFromRemote(e,o){console.log("loadJsonFromRemote");var n=new XMLHttpRequest;n.addEventListener("load",(function(){console.log("loadJsonFromRemote"),o(JSON.parse(this.response))})),n.open("GET",e),n.send()}